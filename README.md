# Record Store Day database builder

Tools to generate a CSV collection of record stores from Record Store Day's website.

**Note**: This is not officially sponsored by Record Store Day,
nor should you lose yourself in scraping. Support Record Store Day.

## Database generation

To command the data, you must first have the data. Record store locations
are scraped from http://www.recordstoreday.com/ in two phases:

1. Collect a list of Record Store Day store profile pages by state and country.
2. Scrape record store name, address, URL, and lat/lng from pages collected in step 1.

### Collect list of venues for each state

First, we need to scrape a list of venues for each region (states, countries).
To do this, use `collect_venues`:

```bash
$ bin/collect_venues -c /path/to/config.json -o /path/to/venues.csv
```

Arguments:

- `-c` - Path to JSON configuration file. A sample configuration file is included
         with this project. **Required.**
- `-o` - Export path for CSV list of Record Store Day store URLs. Default: stdout.

### Scrape addresses for each venue

Now that we've got the Record Store Day pages for partner stores,
we can scrape location and presence details. For this, we'll use
`collect_venue_addresses`.

```bash
# explicit file naming
$ bin/collect_venue_addresses [-i /path/to/venue urls csv] [-o /path/to/output.csv]

# or use stdin/out
$ cat /path/to/venues.csv | bin/collect_venue_addresses > /path/to/output.csv
```

Arguments:

- `-i` - Path to URL list generated by `collect_venues` in step 1. Default: stdin.
- `-o` - Export path for CSV list of store details. Default: stdout.

## TODO

- Add `setup.py`
- File handling cleanup
